var QueueIt,QueueIt,QueueIt;!function(e){(e.Javascript||(e.Javascript={})).Version="2.0.17"}(QueueIt=QueueIt||{}),function(QueueIt){var Tools;!function(Tools){var Json=function(){function Json(){}return Json.parse=function(text,reviver){if(void 0===reviver&&(reviver=null),!text)return null;if("object"==typeof JSON)return JSON.parse(text,reviver);var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j;function walk(e,t){var n,u,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(u=walk(r,n))?r[n]=u:delete r[n]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},Json}();Tools.Json=Json}(Tools=QueueIt.Tools||(QueueIt.Tools={}))}(QueueIt=QueueIt||{}),function(s){var e;(function(e){var n=(t.ENTERED_QUEUE_GOT_QUEUEID="EnteredQueueGotQueueId",t.QUEUEID_ALREADY_EXIST="QueueIdAlreadyExist",t.INVALID_CAPTCHA_TOKEN="InvalidCaptchaToken",t.MISSING_CUSTOM_DATA_KEY="MissingCustomDataKey",t.UNIQUE_KEY_VIOLATION="UniqueKeyViolation",t.UNEXPECTED_FAILURE_TO_ENQUEUE="UnexpectedFailureToEnqueue",t.IDLE_QUEUE_ILLEGAL_ACTION="IdleQueueIllegalAction",t.CUSTOM_DATA_UPDATED="CustomDataUpdated",t.MISSING_QUEUE_ID="MissingQueueId",t.UNEXPECTED_FAILURE_TO_UPDATE="UnexpectedFailureToUpdate",t.INVALID_QUEUEIT_ENQUEUE_TOKEN="InvalidQueueitEnqueueToken",t);function t(){}var u=(r.prototype.deserialize=function(e){try{var t=s.Tools.Json.parse(e);return t||{}}catch(e){return{}}},r.prototype.getQueryStringParam=function(e){for(var t=0,n=this.getQueryString().split("&");t<n.length;t++){var u=n[t];if(u.split("=")[0]==e)return u.split("=")[1]}},r);function r(e,t){var s=this;void 0===e&&(e=!0),this.getQueryString=function(){return window.location.search.substring(1)},this.enqueueWithTokenFromUrl=function(e,t){s.enqueueWithToken(s.getQueryStringParam("qet"),e,t)},this.enqueueWithToken=function(e,t,n){s.onEnqueued=t,s.onEnqueueFailed=n;var u={Type:"QueueitEnqueueToken",QueueitEnqueueToken:e};s.postToParent(u)},this.enqueueWithCustomData=function(e,t,n,u,r){s.onEnqueued=u,s.onEnqueueFailed=r;var a={Type:"Enqueue",Key:e,Email:t,CustomData:n};s.postToParent(a)},this.enqueueWithKey=function(e,t,n){s.onEnqueued=t,s.onEnqueueFailed=n;var u={Type:"Enqueue",Key:e,Email:null,CustomData:null};s.postToParent(u)},this.postToParent=function(e){parent.postMessage(e,"*")},this.notifyDirect=function(e){s.handleMessageReceived(e)},this.receiveMessage=function(e){if(!e.data||!e.data.Type){var t=s.deserialize(e.data);s.handleMessageReceived(t)}},this.handleMessageReceived=function(e){e.messageType==n.ENTERED_QUEUE_GOT_QUEUEID&&s.onEnqueued?s.onEnqueued(e.queueId):e.messageType==n.IDLE_QUEUE_ILLEGAL_ACTION&&s.onEnqueueFailed?s.onEnqueueFailed(n.IDLE_QUEUE_ILLEGAL_ACTION,e.enqueueParams):e.messageType==n.QUEUEID_ALREADY_EXIST&&s.onEnqueueFailed?s.onEnqueueFailed(n.QUEUEID_ALREADY_EXIST,e.enqueueParams):e.messageType==n.INVALID_CAPTCHA_TOKEN&&s.onEnqueueFailed?s.onEnqueueFailed(n.INVALID_CAPTCHA_TOKEN,e.enqueueParams):e.messageType==n.MISSING_CUSTOM_DATA_KEY&&s.onEnqueueFailed?s.onEnqueueFailed(n.MISSING_CUSTOM_DATA_KEY,e.enqueueParams):e.messageType==n.UNIQUE_KEY_VIOLATION&&s.onEnqueueFailed?s.onEnqueueFailed(n.UNIQUE_KEY_VIOLATION,e.enqueueParams):e.messageType==n.UNEXPECTED_FAILURE_TO_ENQUEUE&&s.onEnqueueFailed?s.onEnqueueFailed(n.UNEXPECTED_FAILURE_TO_ENQUEUE,e.enqueueParams):e.messageType==n.CUSTOM_DATA_UPDATED&&s.customdata.onCustomDataUpdated?s.customdata.onCustomDataUpdated():e.messageType==n.MISSING_QUEUE_ID&&s.customdata.onCustomDataUpdateFailed?s.customdata.onCustomDataUpdateFailed(n.MISSING_QUEUE_ID):e.messageType==n.UNEXPECTED_FAILURE_TO_UPDATE&&s.customdata.onCustomDataUpdateFailed?s.customdata.onCustomDataUpdateFailed(n.UNEXPECTED_FAILURE_TO_UPDATE):e.messageType==n.INVALID_QUEUEIT_ENQUEUE_TOKEN&&s.onEnqueueFailed&&s.onEnqueueFailed(n.INVALID_QUEUEIT_ENQUEUE_TOKEN,e.enqueueParams)},this.listenParentFrame=function(){window.addEventListener?window.addEventListener("message",s.receiveMessage,!1):window.attachEvent&&window.attachEvent("onmessage",function(e){return s.receiveMessage})},this.customdata=new a(this),this.listenParentFrame(),e&&(window.queueUserManager=this),t&&(this.getQueryString=t)}e.QueueUserManager=u;var a=function(e){var a=this;this.queueUserManager=e,this.update=function(e,t,n,u){a.onCustomDataUpdated=n,a.onCustomDataUpdateFailed=u;var r={Type:"Update",Email:e,CustomData:t};a.queueUserManager.postToParent(r)}};e.CustomData=a})((e=s.Javascript||(s.Javascript={})).CustomLayout||(e.CustomLayout={}))}(QueueIt=QueueIt||{});var __extends=this&&this.__extends||function(){var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),QueueIt;!function(I){var e;(function(e){var i=function(e,t,n,u,r,a){this.queueNumber=null,this.customerId=e,this.queueId=t,this.eventId=n,this.cultureId=u,this.targetUrl=r,this.tags=a};e.UserInfo=i;function t(e,t){this.key=e,this.value=t}var n,u=(__extends(r,n=t),r);function r(){return null!==n&&n.apply(this,arguments)||this}e.TargetUrlParam=u;var a,s=(__extends(o,a=t),o);function o(){return null!==a&&a.apply(this,arguments)||this}e.Tag=s;var d=(f.prototype.getCustomerId=function(){return this.userInfo.customerId},f.prototype.getQueueId=function(){return this.userInfo.queueId},f.prototype.getEventId=function(){return this.userInfo.eventId},f.prototype.getPageId=function(){return this.userInfo.pageId},f.prototype.getCultureId=function(){return this.userInfo.cultureId},f.prototype.getQueueNumber=function(){return this.userInfo.queueNumber},f.prototype.getUsersInLineAheadOfYou=function(){return this.userInfo.usersInLineAheadOfYou},f.prototype.getTargetUrlParams=function(){return null!=this.userInfo.targetUrlParams?this.userInfo.targetUrlParams:new Array},f.prototype.getTargetUrlParam=function(e){return this.getFromKeyValuePairArray(this.userInfo.targetUrlParams,e)},f.prototype.hasQueueId=function(){var e=this.getQueueId();return e&&"00000000-0000-0000-0000-000000000000"!==e},f.prototype.getTags=function(){return null!=this.userInfo.tags?this.userInfo.tags:new Array},f.prototype.getTag=function(e){return this.getFromKeyValuePairArray(this.userInfo.tags,e)},f.prototype.getFromKeyValuePairArray=function(e,t){if(null==e)return null;var n=e.filter(function(e){return e.key===t});return 0===n.length?null:n[0].value},f.prototype.getUserInfo=function(e){for(var t=void 0,n=void 0,u=void 0,r=void 0,a=(e=e||function(){return window.location.search.substring(1)})().split("&"),s=0;s<a.length;s++){var o=a[s].split("=");"c"===o[0]?t=o[1]:"q"===o[0]?n=o[1]:"e"===o[0]?u=o[1]:"cid"===o[0]&&(r=o[1])}return new i(t,n,u,r,null,null)},f.prototype.receiveMessage=function(e,t){switch(e.messageType){case"UpdateQueue":return e.queueId&&this.userInfo.queueId!==e.queueId&&(this.userInfo.queueId=e.queueId,this.onQueueIdChanged(this.userInfo.queueId)),e.queueNumber&&this.userInfo.queueNumber!==e.queueNumber&&(this.userInfo.queueNumber=e.queueNumber,this.onQueueNumberChanged(this.userInfo.queueNumber)),e.targetUrl&&this.userInfo.targetUrl!==e.targetUrl&&(this.userInfo.targetUrl=e.targetUrl,this.onTargetUrlChanged(this.userInfo.targetUrl)),e.usersInLineAheadOfYou&&this.userInfo.usersInLineAheadOfYou!==e.usersInLineAheadOfYou&&(this.userInfo.usersInLineAheadOfYou=e.usersInLineAheadOfYou,this.onUsersInLineAheadOfYouChanged(this.userInfo.usersInLineAheadOfYou)),e.pageId&&this.userInfo.pageId!==e.pageId&&(this.userInfo.pageId=e.pageId,this.onPageIdChanged(this.userInfo.pageId)),e.targetUrlParams&&!this.areArraysEqual(e.targetUrlParams,this.userInfo.targetUrlParams)&&(this.userInfo.targetUrlParams=e.targetUrlParams,this.onTargetUrlParamsChanged(this.userInfo.targetUrlParams)),void(e.tags&&!this.areArraysEqual(e.tags,this.userInfo.tags)&&(this.userInfo.tags=e.tags,this.onTagsChanged(this.userInfo.tags)));default:return}},f.prototype.areArraysEqual=function(e,t){if(!e&&!t)return!0;if(e&&!t)return!1;if(t&&!e)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].key!==t[n].key||e[n].value!==t[n].value)return!1;return!0},f.prototype.deserialize=function(e){try{var t=I.Tools.Json.parse(e);return t||{}}catch(e){return{}}},f.prototype.listenParentFrame=function(){var t=this;I&&I.Tools&&I.Tools.Json&&(window.addEventListener?window.addEventListener("message",function(e){return t.receiveMessage(t.deserialize(e.data),t.userInfo)},!1):window.attachEvent&&window.attachEvent("onmessage",function(e){return t.receiveMessage(t.deserialize(e.data),t.userInfo)}))},f.prototype.requestRefresh=function(){parent.postMessage('{"messageType":"RequestRefresh"}',"*")},f.prototype.refresh=function(e){this.receiveMessage(this.deserialize(e),this.userInfo)},f);function f(e){void 0===e&&(e=null),this.onUsersInLineAheadOfYouChanged=function(e){},this.onQueueNumberChanged=function(e){},this.onQueueIdChanged=function(e){},this.onPageIdChanged=function(e){},this.onTargetUrlParamsChanged=function(e){},this.onTargetUrlChanged=function(e){},this.onTagsChanged=function(e){},this.userInfo=this.getUserInfo(e),this.listenParentFrame(),this.requestRefresh()}e.QueueUserInfoClient=d,window.queueUserInfoClient=new d})((e=I.Javascript||(I.Javascript={})).CustomLayout||(e.CustomLayout={}))}(QueueIt=QueueIt||{});